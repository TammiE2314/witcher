<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>泡泡组 · 泡泡信</title>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
<header class="topbar">
  <div class="brand">🫧 泡泡信</div>
  <div class="actions">
    <button class="btn" id="btnNewGroup">新建泡泡组</button>
    <button class="btn primary" id="btnNewBubble">新建泡泡</button>
  </div>
</header>

<main class="layout">
  <aside class="panel">
    <div class="panelHead">
      <div class="panelTitle">泡泡组</div>
    </div>
    <div id="groupList" class="list"></div>
  </aside>

  <section class="panel">
    <div class="panelHead">
      <div class="panelTitle" id="currentGroupTitle">当前组：—</div>
      <div class="panelHeadActions">
        <button class="btn tiny" id="btnEditSchema">编辑模板</button>
      </div>
    </div>
    <div class="content">
      <div class="hint">
        右侧泡泡只显示标题。切换泡泡组时，只会显示该组泡泡。
      </div>
    </div>
  </section>

  <aside class="panel">
    <div class="panelHead">
      <div class="panelTitle">泡泡</div>
      <div class="panelHeadActions">
        <select id="sortMode" class="select tiny">
          <option value="updated_desc">按更新时间（新→旧）</option>
          <option value="updated_asc">按更新时间（旧→新）</option>
          <option value="created_desc">按创建时间（新→旧）</option>
          <option value="created_asc">按创建时间（旧→新）</option>
          <option value="time_desc">按时间模块（新→旧）</option>
          <option value="time_asc">按时间模块（旧→新）</option>
          <option value="number_asc">按数字模块（小→大）</option>
          <option value="number_desc">按数字模块（大→小）</option>
        </select>
      </div>
    </div>
    <div id="bubbleList" class="list"></div>
  </aside>
</main>

<div id="backdrop" class="backdrop" hidden></div>

<!-- 新建泡泡组 -->
<div id="modalGroup" class="modal" hidden>
  <div class="modalHead">
    <div class="modalTitle">新建泡泡组</div>
    <button class="icon" data-close="modalGroup">✕</button>
  </div>
  <div class="modalBody">
    <label class="field">
      <div class="label">组名</div>
      <input id="groupName" class="input" placeholder="比如：小初的信 / 旅行记忆 / 想说的话" />
    </label>
    <div class="hint">创建后可在「编辑模板」里增删模块（时间/简介/内容…）。</div>
  </div>
  <div class="modalFoot">
    <button class="btn" data-close="modalGroup">取消</button>
    <button class="btn primary" id="btnCreateGroup">创建</button>
  </div>
</div>

<!-- 编辑模板 -->
<div id="modalSchema" class="modal wide" hidden>
  <div class="modalHead">
    <div class="modalTitle">编辑模板</div>
    <button class="icon" data-close="modalSchema">✕</button>
  </div>
  <div class="modalBody">
    <div class="grid2">
      <label class="field">
        <div class="label">泡泡大标题字段</div>
        <select id="titleField" class="select"></select>
        <div class="hint">右侧泡泡只显示这里选的字段内容。</div>
      </label>
      <div class="field">
        <div class="label">添加模块</div>
        <div class="row">
          <input id="newFieldLabel" class="input" placeholder="显示名，比如：时间/简介/内容" />
          <input id="newFieldKey" class="input" placeholder="key，比如：time/intro/content" />
          <select id="newFieldType" class="select">
            <option value="text">短文本</option>
            <option value="longtext">长文本</option>
            <option value="date">日期</option>
            <option value="number">数字</option>
          </select>
          <button class="btn tiny" id="btnAddField">添加</button>
        </div>
        <div class="hint">建议 key 用英文或拼音；同一个组内 key 不能重复。</div>
      </div>
    </div>

    <div class="sectionTitle">当前模板模块</div>
    <div id="fieldTable" class="table"></div>
  </div>
  <div class="modalFoot">
    <button class="btn" data-close="modalSchema">关闭</button>
    <button class="btn primary" id="btnSaveSchema">保存模板</button>
  </div>
</div>

<!-- 新建/编辑泡泡 -->
<div id="modalBubble" class="modal wide" hidden>
  <div class="modalHead">
    <div class="modalTitle" id="bubbleModalTitle">新建泡泡</div>
    <button class="icon" data-close="modalBubble">✕</button>
  </div>
  <div class="modalBody" id="bubbleForm"></div>
  <div class="modalFoot">
    <button class="btn" data-close="modalBubble">取消</button>
    <button class="btn primary" id="btnSaveBubble">保存</button>
    <button class="btn danger" id="btnDeleteBubble" hidden>删除</button>
  </div>
</div>

<script src="./app.js"></script>
</body>
</html>
